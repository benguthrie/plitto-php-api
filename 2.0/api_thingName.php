<?php /* Populates the thing modal */ $error=f alse; if( !array_key_exists( 'token', $_POST) || !array_key_exists( 'thingId', $_POST) ){ $obj[ 'error']=t rue; $obj[ 'errortxt']='Missing Token.' ; } // echo 'Shared filter. Does it exist? ' . !array_key_exists( 'sharedFilter', $_POST) . " : " . $_POST[ 'sharedFilter']; if(!$error){ $q="call `v2.0_thingName`('" .$_POST[ 'token']. "','".$_POST[ 'thingId']. "')"; // $obj[ 'q']=$ q; $results=q ($q); // TODO2 - Token check this? $sqlErrorCheck=t okenCheck($results); $sqlErrorCheck=f alse; // TODO3 This is sloppy. if($sqlErrorCheck[ 'error']===t rue){ $obj=$ sqlErrorCheck; } else { $obj[ 'results']=$ results; } } ?>